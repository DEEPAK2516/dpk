<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Receiver</title>
</head>
<body>
    <h1>Data Received:</h1>
    <pre id="display-data"></pre>

    <script>
        // Function to handle incoming data
        function handleData(data) {
            const displayElement = document.getElementById('display-data');
            if (data) {
                displayElement.innerText = JSON.stringify(data, null, 2);
            } else {
                displayElement.innerText = 'No valid JSON data received.';
            }
        }

        // Check if there is data in the URL
        const urlParams = new URLSearchParams(window.location.search);
        const dataFromUrl = Object.fromEntries(urlParams.entries());

        // If there is data in the URL, handle it
        if (Object.keys(dataFromUrl).length > 0) {
            handleData(dataFromUrl);
        } else {
            // Use fetch to get the data from the URL
            fetch('/data-endpoint')  // Update the path based on your actual structure
                .then(response => {
                    if (response.ok) {
                        try {
                            return response.json();
                        } catch (error) {
                            console.error('Error decoding JSON:', error);
                            return null;  // Return null if JSON decoding fails
                        }
                    } else {
                        throw new Error(`Request failed with status: ${response.status}`);
                    }
                })
                .then(data => handleData(data))
                .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
